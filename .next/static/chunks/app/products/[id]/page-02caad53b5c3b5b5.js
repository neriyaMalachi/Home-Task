(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{5551:function(e,t,r){Promise.resolve().then(r.bind(r,3330))},3330:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),n=r(2265),a=r(3464),l=r(3145),o=r(9376),i=r(4329),c=e=>{let{isOpen:t,setIsOpen:r,reviewer:n,setReviewer:a,rating:l,setRating:o,comment:c,setComment:d,handleReviewSubmit:u,loading:x}=e;return(0,s.jsx)(i.Vq,{open:t,onClose:()=>r(!1),className:"fixed inset-0 flex items-center justify-center p-4 bg-gray-800/70 bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md space-y-6",children:[(0,s.jsx)("h2",{className:"text-3xl font-semibold text-center text-gray-800 mb-6",children:"הוסף ביקורת"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u({reviewer:n,rating:l,comment:c})},className:"space-y-5",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",value:n,onChange:e=>a(e.target.value),placeholder:"שם מלא",required:!0,className:"w-full p-4 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"})}),(0,s.jsx)("div",{children:(0,s.jsx)("select",{value:l,onChange:e=>o(Number(e.target.value)),className:"w-full p-4 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300",children:[1,2,3,4,5].map(e=>(0,s.jsxs)("option",{value:e,children:[e," כוכבים"]},e))})}),(0,s.jsx)("div",{children:(0,s.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"כתוב ביקורת...",required:!0,className:"w-full p-4 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"})}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>r(!1),className:"w-full sm:w-auto bg-gray-300 text-gray-800 px-6 py-3 rounded-md hover:bg-gray-400 focus:outline-none transition duration-300",children:"ביטול"}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full sm:w-auto bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 focus:outline-none transition duration-300",children:x?"שולח...":"שלח ביקורת"})]})]})]})})},d=e=>{let{isOpen:t,setIsOpen:r,id:l}=e,[o,c]=(0,n.useState)([]);return(0,n.useEffect)(()=>{l&&a.Z.get("/api/product/".concat(l)).then(e=>{c(e.data.reviews.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()))}).catch(e=>{console.error("Error fetching product:",e)})},[t,l]),(0,s.jsx)(i.Vq,{onClick:()=>r(!1),open:t,onClose:()=>r(!1),className:"fixed inset-0 flex items-center justify-end p-4 bg-gray-800/70 bg-opacity-60",children:(0,s.jsxs)("div",{className:"bg-white p-10 rounded-xl shadow-2xl w-96 max-h-screen overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-6",children:"ביקורות"}),0===o.length?(0,s.jsx)("p",{className:"text-gray-500 text-center",children:"אין עדיין ביקורות."}):(0,s.jsx)("ul",{className:"space-y-6",children:o.map((e,t)=>(0,s.jsxs)("li",{className:"p-6 rounded-xl shadow-lg ".concat(0===t?"border-4 border-red-500 bg-red-50":"border-t-2 border-gray-300 bg-gray-50"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"font-semibold text-lg text-gray-800",children:e.reviewer}),(0,s.jsx)("p",{className:"text-yellow-400 text-lg",children:"⭐ ".repeat(e.rating)})]}),(0,s.jsx)("p",{className:"text-gray-700 mb-4 font-medium",children:e.comment}),(0,s.jsx)("p",{className:"text-gray-500 text-sm text-right",children:new Date(e.createdAt).toLocaleDateString()})]},e._id))}),(0,s.jsx)("button",{onClick:()=>r(!1),className:"mt-6 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl w-full font-semibold",children:"סגור"})]})})};function u(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(null),{id:u}=(0,o.useParams)(),[x,m]=(0,n.useState)(!1),[h,g]=(0,n.useState)(""),[b,f]=(0,n.useState)(5),[p,w]=(0,n.useState)(""),[j,v]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{u&&a.Z.get("/api/product/".concat(u)).then(e=>t(e.data)).catch(e=>{console.error("Error fetching product:",e),i("לא ניתן לטעון את פרטי המוצר.")})},[u]);let C=async e=>{v(!0);try{let r=await a.Z.post("/api/product/".concat(u,"/reviews"),e);t(e=>e?{...e,reviews:[...e.reviews,r.data.review]}:null),g(""),f(5),w(""),m(!1)}catch(e){console.error("Error adding review:",e)}v(!1)};return r?(0,s.jsx)("div",{children:r}):e?(0,s.jsxs)("div",{className:"container mx-auto p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold mb-6 text-gray-900 text-center",children:e.name}),(0,s.jsx)("div",{className:"relative w-full max-w-3xl mx-auto mb-6",children:(0,s.jsx)(l.default,{src:e.image,alt:e.name,className:"w-full h-64 object-contain object-center rounded-lg shadow-xl",width:800,height:800})}),(0,s.jsx)("p",{className:"text-lg mt-4 text-gray-700",children:e.description}),(0,s.jsxs)("p",{className:"text-2xl font-semibold mt-4 text-gray-800",children:["₪",e.price]}),(0,s.jsxs)("div",{className:"flex justify-center mt-6 space-x-6",children:[(0,s.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-lg shadow-lg hover:bg-blue-700 transition-all transform hover:scale-105",children:"הוסף ביקורת"}),e.reviews.length>0&&(0,s.jsx)("button",{onClick:()=>N(!0),className:"bg-green-600 text-white px-8 py-3 rounded-lg shadow-lg hover:bg-green-700 transition-all transform hover:scale-105",children:"הצג ביקורות"})]}),(0,s.jsx)(c,{isOpen:x,setIsOpen:m,reviewer:h,setReviewer:g,rating:b,setRating:f,comment:p,setComment:w,handleReviewSubmit:C,loading:j}),(0,s.jsx)(d,{isOpen:y,setIsOpen:N,id:u})]}):(0,s.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:"...טוען"})}}},function(e){e.O(0,[878,63,760,971,117,744],function(){return e(e.s=5551)}),_N_E=e.O()}]);